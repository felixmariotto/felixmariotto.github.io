(()=>{"use strict";var t={489:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,":root {\r\n\t--button-focus-color: rgba( 0, 170, 130, 0.7 );\r\n}\r\n\r\n.button {\r\n\tbackground-color: rgba( 0, 0, 0, 0 );\r\n\tcolor: white;\r\n\tpadding: 10px 16px;\r\n\tborder-radius: 50px;\r\n\tborder-style: solid;\r\n\tborder-color: white;\r\n\tcursor: pointer;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\ttransition: all 0.2s ease-in-out;\r\n\tfont-size: 1em;\r\n}\r\n\r\n\t.button:focus {\r\n\t\tbackground-color: var(--button-focus-color);\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t@media ( hover: hover ) {\r\n\t\t.button:hover {\r\n\t\t\tbackground-color: var(--button-focus-color);\r\n\t\t}\r\n\t}\r\n\r\n\t\t.button > * {\r\n\t\t\tmargin-right: 20px;\r\n\t\t}\r\n",""]);const i=o},538:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n.checkbox {\r\n\tbackground-color: transparent;\r\n\tpadding: 8px;\r\n\tdisplay: block;\r\n\tborder: none;\r\n\tfont-size: 1em;\r\n}\r\n\r\n.checkbox:focus {\r\n\tbackground-color: red;\r\n}\r\n\r\n\t.checkbox > input {\r\n\t\tpointer-events: none;\r\n\t}",""]);const i=o},316:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#code-input {\r\n\tposition: fixed;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate( -50%, -50% );\r\n\tz-index: 2000;\r\n\tpadding: 20px;\r\n\tborder-style: solid;\r\n\tborder-width: 2px;\r\n\tborder-color: black;\r\n\tborder-radius: 10px;\r\n\tbackground-color: grey;\r\n\tdisplay: none;\r\n}\r\n\r\n\t#code-input.enabled {\r\n\t\tdisplay: inherit;\r\n\t}\r\n\r\n\t#code-input textarea {\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 8px;\r\n\t}",""]);const i=o},471:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#dialogue-container {\r\n\tposition: fixed;\r\n\tbackground-color: transparent;\r\n\theight: 100vh;\r\n\twidth: 100vw;\r\n\tpointer-events: none;\r\n\ttransition: background-color 0.3s;\r\n}\r\n\r\n\t#dialogue-container.active {\r\n\t\tpointer-events: auto;\r\n\t\tbackground-color: rgba( 0, 0, 0, 0.5 );\r\n\t}\r\n\r\n\t#dialogue-frame {\r\n\t\tposition: fixed;\r\n\t\tbottom: -20vh;\r\n\t\tleft: 60px;\r\n\t\tborder-radius: 15px;\r\n\t\theight: 20vh;\r\n\t\tpadding: 30px;\r\n\t\twidth: calc( 100vw - 120px );\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\ttransform: translateY( 0 );\r\n\t\ttransition: transform 0.3s;\r\n\t}\r\n\r\n\t\t#dialogue-container.active > #dialogue-frame {\r\n\t\t\ttransform: translateY( calc( -20vh - 60px ) );\r\n\t\t}\r\n\r\n\t\t#dialogue-thumbnail {\r\n\t\t\tborder-radius: 5px;\r\n\t\t\theight: calc( 20vh - 60px );\r\n\t\t\twidth: calc( 20vh - 60px );\r\n\t\t}\r\n\r\n\t\t#dialogue-text {\r\n\t\t\tposition: relative;\r\n\t\t\theight: 100%;\r\n\t\t\twidth: calc( 100% - 20vh + 60px );\r\n\t\t\tmargin-left: 30px;\r\n\t\t}\r\n\r\n\t\t\t#dialogue-text > i {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\tleft: calc( 50% );\r\n\t\t\t\ttransform: translate( -50%, 50% );\r\n\t\t\t\tfont-size: 2em;\r\n\t\t\t\tanimation: swing_dialogue_carret 1s infinite linear;\r\n\t\t\t}\r\n\r\n\t\t\t\t@keyframes swing_dialogue_carret {\r\n\t\t\t\t\tfrom { transform: translate( -50%, 50% ); }\r\n\t\t\t\t\t50% { transform: translate( -50%, 80% ); }\r\n\t\t\t\t\tto { transform: translate( -50%, 50% ); }\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#dialogue-text > i.hidden {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t}\r\n\r\n/* DIALOGUE STYLE TEMPLATES */\r\n\r\n\t/* Narrative */\r\n\r\n\t#dialogue-container.narrative #dialogue-frame {\r\n\t\tbackground-color: grey;\r\n\t\tborder-width: 2px;\r\n\t\tborder-color: black;\r\n\t\tborder-style: solid;\r\n\t}\r\n\r\n\t#dialogue-container.narrative  #dialogue-thumbnail {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t#dialogue-container.narrative  #dialogue-text {\r\n\t\tfont-family: 'Space Mono', monospace;\r\n\t}\r\n",""]);const i=o},792:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#menu-container {\r\n\theight: 100vh;\r\n\twidth: 100vw;\r\n\tposition: fixed;\r\n\tpointer-events: none;\r\n}\r\n\r\n\t#menu-overlay {\r\n\t\theight: 100vh;\r\n\t\twidth: 100vw;\r\n\t\tposition: fixed;\r\n\t\tbackground-color: rgba( 100, 100, 100, 0.7 );\r\n\t\tpointer-events: auto;\r\n\t\tz-index: 0;\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t\t#menu-container.visible > #menu-overlay {\r\n\t\t\tdisplay: unset;\r\n\t\t}\r\n\r\n\t#menu {\r\n\t\tposition: fixed;\r\n\t\tpadding: 45px;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\tcolor: white;\r\n\t\tbackground-color: rgba( 0, 0, 0, 0.6 );\r\n\t\tborder-radius: 25px;\r\n\t\tpointer-events: auto;\r\n\t\tz-index: 1;\r\n\t\ttransform: translate( -50%, -50% );\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t\t#menu button {\r\n\t\t\tmargin: 8px 0;\r\n\t\t}\r\n\r\n\t\t#menu-container.visible > #menu {\r\n\t\t\tdisplay: unset;\r\n\t\t}\r\n\r\n\t\t#menu-base-list {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t\t#menu-base-list > h1 {\r\n\t\t\t\tmargin-bottom: 25px;\r\n\t\t\t}\r\n\r\n\t\t\t/* OPTIONS */\r\n\r\n\t\t\t#menu-options-list > h1 {\r\n\t\t\t\tmargin-bottom: 25px;\r\n\t\t\t}\r\n\r\n\t\t\t#menu-options-list input {\r\n\t\t\t\tmargin-right: 20px;\r\n\t\t\t}\r\n\r\n\t\t\t#menu-options-list label {\r\n\t\t\t\tcolor: white;\r\n\t\t\t}",""]);const i=o},665:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n.range {\r\n\tbackground-color: transparent;\r\n\tpadding: 8px;\r\n\tdisplay: block;\r\n\tborder: none;\r\n\tfont-size: 1em;\r\n}\r\n\r\n.range:focus {\r\n\tbackground-color: red;\r\n}",""]);const i=o},121:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#tag-input {\r\n\tposition: fixed;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate( -50%, -50% );\r\n\tz-index: 2000;\r\n\tpadding: 20px;\r\n\tborder-style: solid;\r\n\tborder-width: 2px;\r\n\tborder-color: black;\r\n\tborder-radius: 10px;\r\n\tbackground-color: grey;\r\n\tdisplay: none;\r\n}\r\n\r\n\t#tag-input.enabled {\r\n\t\tdisplay: inherit;\r\n\t}\r\n\r\n\t#tag-input textarea {\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 8px;\r\n\t}",""]);const i=o},292:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#homepage {\r\n\tbackground-repeat: repeat-y;\r\n\tbackground-size: 130%;\r\n\tbackground-position: 60%;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n}\r\n\r\n\t#homepage-background {\r\n\t\tposition: fixed;\r\n\t\tpadding-top: calc( 100vw * 0.352 * 1.1 );\r\n\t\twidth: calc( 100vw * 1.1 );\r\n\t\theight: 70vh;\r\n\t\tbottom: 7vh;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX( -50% );\r\n\t\tz-index: 0;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-color: black;\r\n\t}\r\n\r\n\t\t/* size of the lanscape in the background */\r\n\r\n\t\t@media ( max-aspect-ratio: 1/1 ) {\r\n\t\t\t#homepage-background {\r\n\t\t\t\tbackground-position: 70% 0%;\r\n\t\t\t\tbottom: 25px;\r\n\t\t\t\theight: 30vh;\r\n\t\t\t\twidth: 100vh;\r\n\t\t\t\tpadding-top: calc( 100vh * 0.352 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@media ( min-aspect-ratio: 2/1 ) {\r\n\t\t\t#homepage-background {\r\n\t\t\t\tpadding-top: calc( 35.2% * 1.3 * 1.1 );\r\n\t\t\t\twidth: calc( 100vw * 1.3 *  1.1 );\r\n\t\t\t\tbottom: auto;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t#homepage > .list {\r\n\t\tposition: fixed;\r\n\t\tdisplay: inline-flex; /* so it has the size of its content */\r\n\t\tmargin: 30px 0;\r\n\t\tpadding: 45px;\r\n\t\tborder-radius: 25px;\r\n\t\tbackground-color: rgba( 0, 0, 0, 0.6 );\r\n\t\tz-index: 1;\r\n\t\tleft: 33%;\r\n\t\ttop: 58%;\r\n\t\ttransform: translate( -50%, -50% );\r\n\t}\r\n\r\n\t\t@media ( max-aspect-ratio: 1/1 ) {\r\n\t\t\t#homepage > .list {\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttop: 33%;\r\n\t\t\t\tbackground-color: rgba( 0, 0, 0, 0.3 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@media ( min-aspect-ratio: 2/1 ) {\r\n\t\t\t#homepage > .list {\r\n\t\t\t\ttop: 50%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t#homepage > h1 {\r\n\t\tcolor: white;\r\n\t\tfont-size: 3em;\r\n\t\tfont-family: 'Orelega One', cursive;\r\n\t}\r\n\r\n\t#homepage-picking-box {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t\t#homepage-picking-box > button {\r\n\t\t\tmargin: 8px 0;\r\n\t\t}\r\n\r\n\t\t#homepage-picking-box.hidden {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t#title-image {\r\n\t\tposition: fixed;\r\n\t\theight: 96px;\r\n\t\twidth: 768px;\r\n\t\ttop: 20px;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX( -50% );\r\n\t}\r\n\r\n\t\t/* the title is on the left side if the screen is wide */\r\n\r\n\t\t@media ( max-aspect-ratio: 1/1 ) {\r\n\t\t\t#title-image {\r\n\t\t\t\theight: 64px;\r\n\t\t\t\twidth: 512px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@media ( min-aspect-ratio: 2/1 ) {\r\n\t\t\t#title-image {\r\n\t\t\t\tleft: 33%;\r\n\t\t\t\ttop: calc( 50% - 200px );\r\n\t\t\t}\r\n\t\t}\r\n",""]);const i=o},285:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-bodies-toolbar {\r\n\theight: 40px;\r\n\twidth: 100%;\r\n\tpadding: 10px;\r\n\tbackground-color: #777777;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n\t#editor-bodies-toolbar .button {\r\n\t\theight: 30px;\r\n\t\twidth: 30px;\r\n\t\tfont-size: 1em;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t\t#editor-bodies-toolbar > * {\r\n\t\t\tmargin: 0 5px;\r\n\t\t}\r\n\r\n#editor-bodies-list-container {\r\n\tposition: relative;\r\n\theight: calc( 100% - 40px );\r\n\twidth: 100%;\r\n\tbackground-color: #999999;\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n}\r\n\r\n\t#editor-bodies-list {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t\t.editor-body-line {\r\n\t\t\theight: 30px;\r\n\t\t\twidth: calc( 100% - 10px );\r\n\t\t\tbackground-color: #444444;\r\n\t\t\tmargin: 2.5px 5px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tcolor: white;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\r\n\t\t\t.editor-body-line.selected {\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t\tborder-width: 2px;\r\n\t\t\t\tborder-color: black;\r\n\t\t\t}",""]);const i=o},843:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-chain-point-options {\r\n\tbackground-color: red;\r\n}\r\n\r\n/* */\r\n\r\n#editor-chain-point-toolbar {\r\n\theight: 40px;\r\n\twidth: 100%;\r\n\tpadding: 10px;\r\n\tbackground-color: #777777;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n\t#editor-chain-point-toolbar .button {\r\n\t\theight: 30px;\r\n\t\twidth: 30px;\r\n\t\tfont-size: 1em;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t\t#editor-chain-point-toolbar > * {\r\n\t\t\tmargin: 0 5px;\r\n\t\t}\r\n\r\n/* */\r\n\r\n#editor-chain-point-list-container {\r\n\tposition: relative;\r\n\theight: calc( 100% - 40px );\r\n\twidth: 100%;\r\n\tbackground-color: #999999;\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n}\r\n\r\n\t#editor-chain-point-list {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tpadding: 4px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t\t.editor-chain-point-line {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-bottom: 5px;\r\n\t\t\tborder-radius: 7px;\r\n\t\t}\r\n\r\n\t\t\t.editor-chain-point-line.selected {\r\n\t\t\t\tborder-width: 2px;\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t\tborder-color: black;\r\n\t\t\t}\r\n\r\n\t\t\t.editor-chain-point-section {\r\n\t\t\t\tpadding: 10px;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tborder-radius: 7px;\r\n\t\t\t}\r\n\r\n\t\t\t\t.editor-chain-point-section > * {\r\n\t\t\t\t\tmargin-bottom: 5px;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.editor-chain-point-section input {\r\n\t\t\t\t\twidth: 250px;\r\n\t\t\t\t\tpadding: 0 10px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.editor-chain-point-section p {\r\n\t\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t}\r\n",""]);const i=o},410:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-console {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: flex-end;\r\n\tpadding: 10px;\r\n}",""]);const i=o},933:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-files-options {\r\n\tbackground-color: #111111;\r\n\tpadding: 20px;\r\n}\r\n\r\n#editor-files-options > * {\r\n\tmargin-bottom: 10px;\r\n}\r\n\r\n#editor-files-options > * > * {\r\n\tmargin-right: 10px;\r\n}",""]);const i=o},59:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n.ui-panel {\r\n\tbackground-color: black;\r\n\tborder-radius: 5px;\r\n\tborder-style: solid;\r\n\tborder-color: white;\r\n\tborder-width: 1px;\r\n\toverflow: hidden;\r\n}\r\n\r\n#editor-page {\r\n\tdisplay: flex;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tbackground-color: black;\r\n}\r\n\r\n\t/* LEFT PANEL */\r\n\r\n\t#editor-left-panel {\r\n\t\tposition: relative;\r\n\t\theight: 100%;\r\n\t\twidth: calc( 100% - 400px );\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t\t#editor-console {\r\n\t\t\tposition: relative;\r\n\t\t\theight: 100px;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t#editor-viewport {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: calc( 100% - 100px );\r\n\t\t}\r\n\r\n\t/* RIGHT PANEL */\r\n\r\n\t#editor-right-panel {\r\n\t\tposition: relative;\r\n\t\theight: 100%;\r\n\t\twidth: 400px;\r\n\t}\r\n\r\n\t\t/* TOOLS BUTTONS */\r\n\r\n\t\t#editor-tools {\r\n\t\t\theight: 400px;\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 10px;\r\n\t\t\tbackground-color: #333333;\r\n\t\t}\r\n\r\n\t\t\t#editor-tools > * {\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t}\r\n\r\n\t\t/* TOOLS OPTIONS */\r\n\r\n\t\t#editor-tools-options {\r\n\t\t\tposition: relative;\r\n\t\t\theight: calc( 100% - 400px );\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t\t.tool-options {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tbackground-color: black;\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}",""]);const i=o},430:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-player-options {\r\n\tbackground-color: #111111;\r\n\tpadding: 20px;\r\n}\r\n\r\n\t.editor-player-input-container {\r\n\t\tmargin-bottom: 5px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tbackground-color: grey;\r\n\t\tpadding: 8px;\r\n\t}\r\n\r\n\t\t.editor-player-input-container input {\r\n\t\t\twidth: 250px;\r\n\t\t\tpadding: 0 10px;\r\n\t\t}\r\n\r\n\t\t.editor-player-input-container p {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}",""]);const i=o},73:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n#editor-shapes-options {\r\n\tposition: relative;\r\n\tbackground-color: #777777;\r\n\tpadding: 10px;\r\n}\r\n\r\n\t#editor-add-shape-toolbar {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t\t#editor-add-shape-toolbar > * {\r\n\t\t\tmargin: 0 5px;\r\n\t\t}",""]);const i=o},229:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(645),o=e.n(r)()((function(t){return t[1]}));o.push([t.id,"\r\n* {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tbox-sizing: border-box;\r\n\tfont-family: 'Roboto', sans-serif;\r\n}\r\n\r\nbody {\r\n\theight: 100vh;\r\n\twidth: 100vw;\r\n}\r\n\r\n.game-container {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tz-index: 1000;\r\n}",""]);const i=o},645:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(e&&(c[2]?c[2]="".concat(e," and ").concat(c[2]):c[2]=e),n.push(c))}},n}},379:(t,n,e)=>{var r,o=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),i=[];function a(t){for(var n=-1,e=0;e<i.length;e++)if(i[e].identifier===t){n=e;break}return n}function s(t,n){for(var e={},r=[],o=0;o<t.length;o++){var s=t[o],c=n.base?s[0]+n.base:s[0],l=e[c]||0,d="".concat(c," ").concat(l);e[c]=l+1;var p=a(d),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(i[p].references++,i[p].updater(u)):i.push({identifier:d,updater:m(u,n),references:1}),r.push(d)}return r}function c(t){var n=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=e.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){n.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(n);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var l,d=(l=[],function(t,n){return l[t]=n,l.filter(Boolean).join("\n")});function p(t,n,e,r){var o=e?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(n,o);else{var i=document.createTextNode(o),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(i,a[n]):t.appendChild(i)}}function u(t,n,e){var r=e.css,o=e.media,i=e.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var h=null,g=0;function m(t,n){var e,r,o;if(n.singleton){var i=g++;e=h||(h=c(n)),r=p.bind(null,e,i,!1),o=p.bind(null,e,i,!0)}else e=c(n),r=u.bind(null,e,n),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else o()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var e=s(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<e.length;r++){var o=a(e[r]);i[o].references--}for(var c=s(t,n),l=0;l<e.length;l++){var d=a(e[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}e=c}}}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return t[r](i,i.exports,e),i.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{var t=e(379),n=e.n(t),r=e(229);n()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var o=e(292);function i(t){const n=(t=t||{}).tagName||"DIV",e=document.createElement(n);return t.id&&(e.id=t.id),t.html&&e.append(t.html),t.classes&&e.classList.add(...t.classes.split(" ")),t.type&&(e.type=t.type),e}function a(t){return i({tagName:"I",classes:t})}function s(t){const n=document.createElement("div");return n.innerHTML=t.trim(),n.firstChild}function c(){let t,n,e=0;const r=document.createElement("DIV");function o(){const t=a();t&&t[e].focus()}function i(){const t=a();t&&(t[e].click(),s())}function a(){return Array.from(r.children).filter((t=>t.isSelectable))}function s(){const t=a(),n={};t.forEach((t=>{if(t.getValue){const e=t.getValue();n[e.name]=e.value}}));const e=new CustomEvent("update-values",{detail:n});r.dispatchEvent(e)}return r.classList.add("list"),r.enable=function(){t||(r.addEventListener("mousemove",(()=>{n&&s()})),engine.on("joystick-hit-up",(()=>{n&&(e--,e<0&&(e=0),o())})),engine.on("joystick-hit-down",(()=>{n&&function(){const t=a();t&&(e++,e>t.length-1&&(e=t.length-1),o())}()})),engine.on("joystick-hit-right",(()=>{n&&function(){const t=a();t&&(t[e].moveRight&&t[e].moveRight(),s())}()})),engine.on("joystick-hit-left",(()=>{n&&function(){const t=a();t&&(t[e].moveLeft&&t[e].moveLeft(),s())}()})),engine.on("jump-key-down",(()=>{n&&i()})),engine.on("pull-key-down",(()=>{n&&i()})),engine.on("release-key-down",(()=>{n&&i()})),t=!0),o(),setTimeout((()=>{n=!0}),0)},r.disable=function(){n=!1},r}n()(o.Z,{insert:"head",singleton:!1}),o.Z.locals;var l=e(489);function d(t){const n=i({tagName:"BUTTON",classes:"button",html:t});return n.isSelectable=!0,n}n()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;var p=e(792);n()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;var u=e(665);function h(t,n,e,r,o,a){e<0&&console.warn("I think there will be some issues with a negative value");const c=Math.max(1,r/100),l=s(`\n\t\t<input type="range" id="menu-range-${t}" name="${t}"\n\t\tmin="${e/=c}" max="${r/=c}, step=${o/=c}" value="${a/=c}">\n\t`),d=s(`<label for="${t}">${n}</label>`),p=i({tagName:"BUTTON",classes:"range"});return p.append(l,d),p.isSelectable=!0,p.moveRight=()=>{l.value=Number(l.value)+o},p.moveLeft=()=>{l.value=Number(l.value)-o},p.getValue=()=>({name:t,value:Number(l.value)*c}),p}n()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;var g=e(538);function m(t,n,e){const r=s(`\n\t\t<input type="checkbox" id="scales" name="${t}"\n\t\t${e?"checked":""}>\n\t`),o=s(`<label for="${t}">${n}</label>`),a=i({tagName:"BUTTON",classes:"checkbox"});return a.append(r,o),a.isSelectable=!0,a.onclick=()=>{r.checked=!r.checked},a.getValue=()=>({name:t,value:r.checked}),a}n()(g.Z,{insert:"head",singleton:!1}),g.Z.locals;const f=i({id:"menu-container"}),b=i({id:"menu-overlay"}),v=i({id:"menu"});f.append(v,b);const w=c();w.id="menu-base-list";const y=d("Resume"),x=d("Restart Level"),E=d("Options");y.onclick=()=>{engine.core.makeSurePointerLock().then((t=>{"success"===t&&(engine.levelManager.resume(),f.hide())})).catch((t=>console.log(t)))},x.onclick=()=>{engine.core.makeSurePointerLock().then((t=>{"success"===t&&(engine.levelManager.restart(),f.hide())})).catch((t=>console.log(t)))},E.onclick=()=>{v.removeChild(w),v.append(k),w.disable(),k.enable()},w.append(i({tagName:"H1",html:"Menu"}),y,x,E),v.append(w);const k=c();k.id="menu-options-list",k.addEventListener("update-values",(t=>{engine.emit("update-params",t.detail)}));const T=h("fov","Camera FOV",50,120,10,80),L=m("invertCamX","Invert camera horizontally",!1),S=m("invertCamY","Invert camera vertically",!1),N=h("musicVolume","Music volume",0,100,10,100),O=h("soundVolume","Sound effects volume",0,100,10,100),C=d("Back");C.onclick=()=>{v.removeChild(k),v.append(w),k.disable(),w.enable()},k.append(i({tagName:"H1",html:"Options"}),i({tagName:"H2",html:"Camera"}),T,L,S,i({tagName:"H2",html:"Sound"}),N,O,function(t){const n=document.createElement("div");return n.style.height=t+"px",n}(15),C),f.show=()=>{f.classList.add("visible"),w.enable()},f.hide=()=>{f.classList.remove("visible"),w.disable()};const j=f;var H=e(471);n()(H.Z,{insert:"head",singleton:!1}),H.Z.locals;const M=i({id:"dialogue-container"}),R=i({id:"dialogue-frame"}),Z=i({id:"dialogue-thumbnail"}),I=i({id:"dialogue-text"}),V=a("fas fa-caret-down");let z,P,A,D,F;function B(){P++,A=0,P>z.length-1?(P=0,$(),engine.core.makeSurePointerLock().then((t=>{"success"===t&&(M.end(),I.innerHTML="",I.append(V))})).catch((t=>console.log(t)))):(I.innerHTML="",I.append(V))}M.append(R),R.append(Z,I),I.append(V);let G=!1;function $(){G=!1}function U(){if(G&&setTimeout(U,30),G&&z){const t=z[P];A>t.m.length-1?(V.classList.remove("hidden"),F=!0):(V.classList.add("hidden"),F=!1,I.append(t.m[A]),A++)}}M.start=function(t){var n;D||(engine.on("jump-key-down",(()=>{F&&B()})),engine.on("pull-key-down",(()=>{F&&B()})),engine.on("release-key-down",(()=>{F&&B()})),D=!0),n=t.story,z=n,P=0,A=0,G=!0,U(),M.classList.add("active",t.template)},M.end=function(){$(),M.classList.remove("active"),engine.levelManager.resume()};const q=M,_=i({id:"game-page",classes:"game-container"});_.start=function(){_.append(j,q),engine.core.init(_),engine.levelManager.loadLevel("playground"),engine.on("gate",(t=>{const n=t.detail;engine.levelManager.loadLevel(n)})),engine.on("pointerlock-disabled",(()=>{engine.levelManager.pause(),q.start(engine.dialogues.intro)}))};const J=_;var W=e(59);n()(W.Z,{insert:"head",singleton:!1}),W.Z.locals;var X=e(410);n()(X.Z,{insert:"head",singleton:!1}),X.Z.locals;const Y=i({id:"editor-console",classes:"ui-panel"});function K(t,n){const e=i({html:t});e.style.color=n,Y.append(e)}Y.log=t=>K(t,"white"),Y.warn=t=>K(t,"yellow"),Y.error=t=>K(t,"red");const Q=Y;var tt=e(316);n()(tt.Z,{insert:"head",singleton:!1}),tt.Z.locals;const nt=document.createElement("DIV");nt.id="code-input";const et=document.createElement("TEXTAREA");et.placeholder="this.position.x = Math.sin( time / 200 );",et.rows="10",et.cols="150";const rt=d("validate");rt.style.width="100px",rt.onclick=()=>{const t=new CustomEvent("validate",{detail:et.value});nt.dispatchEvent(t)},nt.append(et,rt),document.body.append(nt);let ot=!1;nt.toggle=function(){ot?nt.classList.remove("enabled"):nt.classList.add("enabled"),ot=!ot},nt.reset=function(){et.value=""},nt.setContent=function(t){et.value=t};const it=nt;var at=e(121);n()(at.Z,{insert:"head",singleton:!1}),at.Z.locals;const st=document.createElement("DIV");st.id="tag-input";const ct=document.createElement("TEXTAREA");ct.placeholder='{ "foo": 42, "bar: "baz" }',ct.rows="10",ct.cols="150";const lt=d("validate");lt.style.width="100px",lt.onclick=()=>{const t=new CustomEvent("validate",{detail:ct.value});st.dispatchEvent(t)},st.append(ct,lt),document.body.append(st);let dt=!1;st.toggle=function(){dt?st.classList.remove("enabled"):st.classList.add("enabled"),dt=!dt},st.reset=function(){ct.value=""},st.setContent=function(t){ct.value=t};const pt=st;var ut=e(285);n()(ut.Z,{insert:"head",singleton:!1}),ut.Z.locals;var ht=e(73);n()(ht.Z,{insert:"head",singleton:!1}),ht.Z.locals;const gt=[];let mt=[],ft=[];setTimeout((()=>{engine.core.callInLoop((()=>{if(mt.length){const t=.2*Math.sin(Date.now()/100)+.2;mt.forEach((n=>{n.emissive.setScalar(t)}))}}))}),500);const bt=i({id:"editor-shapes-options",classes:"tool-options"}),vt=i({id:"editor-add-shape-toolbar"});function wt(t,n){const e=d(a(t));return e.onclick=n,e}function yt(t){xt();const n=(()=>{switch(t){case"sphere":return new engine.THREE.IcosahedronGeometry(1,3);case"cylinder":return new engine.THREE.CylinderGeometry(1,1,1,16);default:return new engine.THREE.BoxGeometry}})(),e=new engine.THREE.Mesh(n,Tt());return e.isEditorShape=!0,e.shapeType=t,gt.push(e),engine.core.scene.add(e),Et(e),e.getInfo=function(){switch(t){case"box":return{pos:e.position,rot:e.rotation,width:e.scale.x,height:e.scale.y,depth:e.scale.z,type:"box"};case"sphere":return{pos:e.position,rot:e.rotation,radius:e.scale.x,type:"sphere"};case"cylinder":return{pos:e.position,rot:e.rotation,radius:e.scale.x,height:e.scale.y,type:"cylinder"}}},e}function xt(){if(!ft.length)return;mt.forEach((t=>t.emissive.setScalar(0))),mt=[],ft=[];const t=new CustomEvent("end-transform");window.dispatchEvent(t)}function Et(t){mt.push(t.material),ft.push(t);const n=new CustomEvent("transform-shape",{detail:ft});window.dispatchEvent(n)}function kt(t){const n=yt(t.type);switch(t.type){case"box":n.scale.set(t.width,t.height,t.depth);break;case"sphere":n.scale.setScalar(t.radius);break;case"cylinder":n.scale.set(t.radius,t.height,t.radius)}return t.rot&&n.rotation.copy(t.rot),t.pos&&n.position.copy(t.pos),xt(),n}function Tt(){return new engine.THREE.MeshPhongMaterial({color:5592405})}vt.append(wt("fas fa-circle",(function(){yt("sphere")})),wt("far fa-cube",(function(){yt("box")})),wt("fal fa-ring",(function(){yt("cylinder")}))),bt.append("Add a shape :",vt),window.addEventListener("keydown",(t=>{"Escape"===t.code?xt():"Delete"===t.code&&function(){if(ft.length){const t=ft.slice(0);xt(),t.forEach((t=>{t.parent.remove(t),t.material.dispose(),t.geometry.dispose()})),Q.log("Shapes deleted")}else Q.warn("No shape is selected, nothing to delete")}()}));const Lt={shapes:gt,domOptions:bt,selectShape:Et,getSelected:function(){return ft},fromInfo:kt,duplicateSelected:function(){if(ft.length){const t=[];ft.forEach((n=>{const e=kt(n.getInfo());e.scale.copy(n.scale),t.push(e)})),t.forEach((t=>Et(t))),Q.log("duplicated shapes")}else Q.warn("no shape selected, impossible to duplicate.")},DefaultShapeMaterial:Tt},St=[];let Nt=null;const Ot=i({classes:"tool-options"}),Ct=i({id:"editor-bodies-toolbar"});function jt(t,n){const e=d(a(t));return e.onclick=()=>n(),e}Ot.append(Ct),Ct.append(jt("far fa-plus-square",(function(){const t=At();St.push(t),Mt.append(t.domElement),t.domElement.onclick=()=>{Rt(t)},Rt(t)})),jt("far fa-trash-alt",(function(){Nt&&window.confirm("Are you sure to delete this body ?")&&(St.splice(St.indexOf(Nt),1),Nt.clear(),Nt=null)})),jt("fas fa-file-import",Zt),jt("fas fa-file-export",It),jt("fas fa-lightbulb-on",(function(){Nt&&(Nt.threeObj.visible=!0)})),jt("far fa-lightbulb",(function(){Nt&&(Nt.threeObj.visible=!1)})),jt("fas fa-code",(function(){Nt&&(window.addEventListener("keydown",Pt),it.toggle(),it.setContent(Nt.transformCode))})),jt("fas fa-tags",(function(){Nt&&(window.addEventListener("keydown",zt),pt.toggle(),pt.setContent(Nt.tags||""))})));const Ht=i({id:"editor-bodies-list-container"}),Mt=i({id:"editor-bodies-list"});function Rt(t){St.forEach((t=>t.domElement.classList.remove("selected"))),Nt=null,t.domElement.classList.add("selected"),Nt=t}function Zt(t,n){const e=t?[t]:Lt.getSelected();(n=n||Nt)&&e.length&&(e.forEach((t=>{t.parent&&!t.parent.isTransformContainer&&n.threeObj.attach(t)})),e.forEach((t=>t.owner=n)),n.color&&e.forEach((t=>t.material.color.set(n.color))))}function It(t){if(t&&!t.shapeType)return;const n=t?[t]:Lt.getSelected();Nt&&n.length&&(n.forEach((t=>t.owner=void 0)),engine.core.scene.attach(...n),n.forEach((t=>t.material=Lt.DefaultShapeMaterial())))}function Vt(){const t=new engine.THREE.Color;return t.r=.4+.6*Math.random(),t.g=.4+.6*Math.random(),t.b=.4+.6*Math.random(),t}function zt(t){"Escape"===t.code&&(pt.reset(),pt.toggle(),window.removeEventListener("keydown",zt))}function Pt(t){"Escape"===t.code&&(it.reset(),it.toggle(),window.removeEventListener("keydown",Pt))}function At(t){t=t||Math.random().toString(36).substring(8);const n=new engine.THREE.Object3D;engine.core.scene.add(n);const e=Vt(),r=i({classes:"editor-body-line",html:t});return r.style.backgroundColor="#"+new engine.THREE.Color(e).getHexString(),r.style.color="black",{name:t,color:e,clear:function(){this.domElement.remove();for(let t=this.threeObj.children.length;t>-1;t--)It(this.threeObj.children[t]);this.threeObj.parent.remove(this.threeObj)},threeObj:n,isBody:!0,transformCode:null,domElement:r}}Ot.append(Ht),Ht.append(Mt),pt.addEventListener("validate",(t=>{const n=t.detail;pt.reset(),pt.toggle(),Nt&&(Nt.tags=n),window.removeEventListener("keydown",Pt)})),it.addEventListener("validate",(t=>{const n=t.detail;it.reset(),it.toggle(),Nt&&(Nt.transformCode=n,Nt.transformFunction=Function("time",n)),window.removeEventListener("keydown",Pt)}));const Dt={bodies:St,domOptions:Ot,fromInfo:function(t){const n=At(t.name);n.transformCode=t.trans,n.tags=t.tags,n.color=t.color||Vt(),t.trans&&(n.transformFunction=Function("time",t.trans)),St.push(n),Mt.append(n.domElement),n.domElement.onclick=()=>{Rt(n)},n.domElement.style.backgroundColor="#"+new engine.THREE.Color(n.color).getHexString(),n.domElement.style.color="black",t.shapes.forEach((t=>{Zt(Lt.fromInfo(t),n)}))},getFromName:function(t){return St.find((n=>n.name===t))}};var Ft=e(933);n()(Ft.Z,{insert:"head",singleton:!1}),Ft.Z.locals;const Bt=i({id:"editor-files-options",classes:"tool-options"});function Gt(t,n,e){const r=d(a(t));return r.append(n),r.onclick=e,r}Bt.append(Gt("fas fa-upload","import JSON",(function(){if(window.confirm("Are you sure to import a scene and erase the current scene ?")){const t=document.createElement("INPUT");t.type="file",t.addEventListener("change",(t=>{t.target.files[0].text().then((t=>function(t){const n=new CustomEvent("scene-graph-loaded",{detail:t});window.dispatchEvent(n)}(JSON.parse(t))))})),t.click()}})),Gt("fas fa-download","save map graph",(function(){const t=new CustomEvent("scene-graph-request");window.dispatchEvent(t)})),Gt("fas fa-download","save map as GLTF",(function(){const t=new CustomEvent("gltf-request");window.dispatchEvent(t)})));const $t={domOptions:Bt,saveAsJSON:function(t){try{let n="game-map-"+(new Date).toLocaleString()+".txt";n=n.replace(/:/g,"_");const e=JSON.stringify(t),r=new Blob([e],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download=n,o.click(),Q.log("the scene has been successfully saved as "+n)}catch(t){console.error(t),console.log(t)}},saveAsGLTF:function(t){try{let n="game-map-"+(new Date).toLocaleString()+".glb";n=n.replace(/:/g,"_");const e=new Blob([t],{type:"application/octet-stream"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=n,r.click(),Q.log("the scene has been successfully saved as "+n)}catch(t){console.error(t),console.log(t)}}};var Ut=e(843);n()(Ut.Z,{insert:"head",singleton:!1}),Ut.Z.locals;const qt=[];let _t;const Jt=i({id:"editor-chain-point-options",classes:"tool-options"}),Wt=i({id:"editor-chain-point-toolbar"});function Xt(t,n){const e=d(a(t));return e.onclick=()=>n(),e}Jt.append(Wt),Wt.append(Xt("far fa-plus-square",Qt),Xt("far fa-trash-alt",(function(){_t?_t.clear():Q.warn("no chain point selected for removal")})));const Yt=i({id:"editor-chain-point-list-container"}),Kt=i({id:"editor-chain-point-list"});function Qt(t){const n=function(t){const n={setRadius:function(t){this.inner.scale.setScalar(t)},setLength:function(t){this.outer.scale.setScalar(t/20)},getParams:function(){return{bodyName:r.getValue(),x:o.getValue(),y:a.getValue(),z:s.getValue(),length:c.getValue(),radius:l.getValue(),enabled:d.getValue(),init:p.getValue(),color:n.color.getHexString()}},clear:function(){this.domElement.remove(),this.object3D.parent.remove(this.object3D),this.inner.material.dispose(),this.inner.geometry.dispose(),this.outer.material.dispose(),this.outer.geometry.dispose(),this.core.material.dispose(),this.core.geometry.dispose(),qt.splice(qt.indexOf(this),1)}};n.color=t?new engine.THREE.Color("#"+t.color):function(){const t=new engine.THREE.Color;return t.r=.4+.6*Math.random(),t.g=.4+.6*Math.random(),t.b=.4+.6*Math.random(),t}(),n.object3D=new engine.THREE.Group,n.outer=new engine.THREE.Mesh(new engine.THREE.IcosahedronGeometry(20,3),new engine.THREE.MeshPhongMaterial({wireframe:!0,color:n.color,transparent:!0,opacity:.3})),n.inner=new engine.THREE.Mesh(new engine.THREE.IcosahedronGeometry(1,1),new engine.THREE.MeshPhongMaterial({wireframe:!0,color:n.color})),n.core=new engine.THREE.Mesh(new engine.THREE.IcosahedronGeometry(.3),new engine.THREE.MeshPhongMaterial({color:n.color})),n.object3D.add(n.inner,n.outer,n.core),engine.core.scene.add(n.object3D),n.domElement=i({classes:"editor-chain-point-line"}),n.domElement.style.backgroundColor="#"+new engine.THREE.Color(n.color).getHexString(),n.domElement.style.color="black",n.domElement.onclick=()=>{return t=n,_t&&_t.classList.remove("selected"),t.domElement.classList.add("selected"),void(_t=t);var t};const e=i({classes:"editor-chain-point-section"}),r=tn("body name",""),o=tn("x",0),a=tn("y",0),s=tn("z",0),c=tn("length",20),l=tn("attach radius",1),d=nn("enabled"),p=nn("initial chain");return p.setValue(!1),e.append(r,o,a,s,c,l,d,p),n.domElement.append(e),t&&(r.setValue(t.bodyName),o.setValue(t.x),a.setValue(t.y),s.setValue(t.z),c.setValue(t.length),l.setValue(t.radius),d.setValue(t.enabled),p.setValue(t.init)),n}(t);qt.push(n),Kt.append(n.domElement)}function tn(t,n){const e=i(),r=i({tagName:"INPUT"});return r.value=n,e.append(t,r),e.getValue=()=>r.value,e.setValue=t=>r.value=t,r.onchange=en,e}function nn(t){const n=i(),e=i({tagName:"INPUT"});return e.type="checkbox",e.checked=!0,n.append(t,e),n.getValue=()=>e.checked,n.setValue=t=>e.checked=t,e.onchange=en,n}function en(){qt.map((t=>{const n=t.getParams(),e=Dt.getFromName(n.bodyName);return e&&e.threeObj.add(t.object3D),t.object3D.position.set(Number(n.x),Number(n.y),Number(n.z)),t.setRadius(Number(n.radius)),t.setLength(Number(n.length)),n})).filter((t=>t.init)).length>1&&Q.warn("There is more than one initial chain point.");const t=new CustomEvent("update-chain");window.dispatchEvent(t)}Jt.append(Yt),Yt.append(Kt);const rn={domOptions:Jt,chainPoints:qt,getParams:function(){return qt.map((t=>t.getParams()))},fromInfo:function(t){t&&(t.forEach((t=>Qt(t))),en())}};var on=e(430);n()(on.Z,{insert:"head",singleton:!1}),on.Z.locals;const an=i({id:"editor-player-options",classes:"tool-options"}),sn=dn("x"),cn=dn("y"),ln=dn("z");function dn(t){const n=i({classes:"editor-player-input-container"}),e=i({tagName:"INPUT"});return n.append(t,e),n.getValue=()=>e.value,n.setValue=t=>e.value=t,e.onchange=pn,n}function pn(){const t=new CustomEvent("update-player",{detail:un()});window.dispatchEvent(t)}function un(){return{x:sn.getValue(),y:cn.getValue(),z:ln.getValue()}}an.append(sn,cn,ln);const hn={domOptions:an,getPosition:un,fromInfo:function(t){sn.setValue(t.x),cn.setValue(t.y),ln.setValue(t.z),pn()}};let gn,mn,fn,bn,vn;const wn=[Dt,Lt,$t,rn,hn],yn=i({id:"editor-page",classes:"game-container"}),xn=i({id:"editor-left-panel"}),En=i({id:"editor-right-panel"});yn.append(xn,En);const kn=i({id:"editor-viewport",classes:"ui-panel"});xn.append(Q,kn);const Tn=i({id:"editor-tools",classes:"ui-panel"}),Ln=i({id:"editor-tools-options",classes:"ui-panel"});function Sn(t,n){const e=d(t);return e.onclick=()=>{n.isEnabled||(wn.forEach((t=>{t.domOptions.style.display="none",t.isEnabled=!1})),n.isEnabled=!0,n.domOptions.style.display="inherit")},e}En.append(Tn,Ln),Tn.append(Sn("files",$t),"//",Sn("bodies",Dt),Sn("shapes",Lt),"//",Sn("chain points",rn),Sn("player",hn)),Ln.append(Dt.domOptions,Lt.domOptions,$t.domOptions,rn.domOptions,hn.domOptions);let Nn=!1;window.addEventListener("keydown",(t=>{switch("Escape"===t.code&&document.activeElement.blur(),t.keyCode){case 83:jn();break;case 68:Nn&&Lt.duplicateSelected();break;case 16:Nn=!0}})),window.addEventListener("keyup",(t=>{switch(t.keyCode){case 16:Nn=!1}})),window.addEventListener("gltf-request",(()=>{engine.core.scene.traverse((t=>{t.position&&(t.position.set(Number(t.position.x),Number(t.position.y),Number(t.position.z)),t.updateMatrix(),t.updateMatrixWorld(!0))})),(new engine.GLTFExporter).parse(engine.core.scene,(function(t){$t.saveAsGLTF(t)}),{binary:!0})})),window.addEventListener("scene-graph-request",(()=>{const t={chainPoints:rn.getParams(),player:hn.getPosition()};t.bodies=Dt.bodies.map((t=>{const n={name:t.name,trans:t.transformCode,color:t.color,tags:t.tags};return n.shapes=t.threeObj.children.filter((t=>t.shapeType)).map((t=>t.getInfo())),n})),$t.saveAsJSON(t)})),window.addEventListener("scene-graph-loaded",(t=>{try{const n=t.detail;engine.core.scene.traverse((t=>{(t.shapeType||t.isBody)&&(t.material.dispose(),t.geometry.dispose())})),engine.core.scene.clear(),engine.core.scene.add(gn,mn,fn,bn),Rn(),Zn(),n.bodies.forEach((t=>{Dt.fromInfo(t)})),rn.fromInfo(n.chainPoints),hn.fromInfo(n.player),bn&&bn.updateHelper(),Q.log("a scene has been successfully imported")}catch(t){Q.error(t),console.log(t)}})),window.addEventListener("update-player",(t=>{fn.position.copy(t.detail),bn.updateHelper()})),window.addEventListener("update-chain",(()=>{bn.updateHelper()}));const On=["translate","rotate","scale"];let Cn=0;function jn(){if(!gn)return;const t=mn.children.length>1?2:3;Cn=(Cn+1)%t,gn.setMode(On[Cn])}function Hn(){for(let t=mn.children.length-1;t>-1;t--)mn.children[t].owner?mn.children[t].owner.threeObj.attach(mn.children[t]):engine.core.scene.attach(mn.children[t]);gn.detach(mn),mn.rotation.set(0,0,0),mn.scale.setScalar(1)}function Mn(){requestAnimationFrame(Mn),engine.core.render()}function Rn(){const t=new engine.THREE.AxesHelper(100),n=new engine.THREE.Mesh;engine.core.scene.add(n,t)}function Zn(){const t=new engine.THREE.AmbientLight(4210752),n=new engine.THREE.DirectionalLight(16777215,.5),e=new engine.THREE.DirectionalLight(16777215,.5);n.position.set(.4,1,-.2),e.position.set(.2,1,.2),engine.core.scene.add(n,e,t)}window.addEventListener("transform-shape",(t=>{Hn(),function(t){const n=new engine.THREE.Box3;n.setFromObject(t[0]),t.forEach((t=>n.expandByObject(t))),n.getCenter(mn.position)}(t.detail),t.detail.length>1&&"scale"===On[Cn]&&jn(),1===t.detail.length&&mn.rotation.copy(t.detail[0].rotation),gn.attach(mn),t.detail.forEach((t=>mn.attach(t)))})),window.addEventListener("end-transform",Hn),yn.start=function(){try{const t=new engine.THREE.Vector3,n=new engine.THREE.Vector3;engine.core.init(kn,!0),Mn(),Zn(),gn=new engine.TransformControls(engine.core.camera,kn),gn.setSpace("local"),mn=new engine.THREE.Group,mn.isTransformContainer=!0,fn=new engine.THREE.Mesh(new engine.THREE.SphereGeometry,engine.materials.characterMaterial),engine.core.scene.add(gn,mn,fn);const e=new engine.THREE.LineBasicMaterial({color:16711935}),r=[new engine.THREE.Vector3(0,0,0),new engine.THREE.Vector3(0,0,0)],o=(new engine.THREE.BufferGeometry).setFromPoints(r);bn=new engine.THREE.Line(o,e),engine.core.scene.add(bn),bn.updateHelper=function(){const t=rn.getParams().filter((t=>t.init));if(t.length){bn.visible=!0;const n=t[0];vn=Dt.getFromName(n.bodyName);const e=hn.getPosition();fn.updateMatrixWorld(),r[0].set(Number(e.x),Number(e.y),Number(e.z)),n&&r[1].set(Number(n.x),Number(n.y),Number(n.z))}else bn.visible=!1},engine.core.callInLoop((()=>{t.copy(r[0]),n.copy(r[1]),vn&&vn.threeObj.localToWorld(n),o.setFromPoints([t,n])})),Rn();const i=engine.cameraControls.orbitObj(engine.core.scene);gn.addEventListener("mouseDown",(()=>i.enabled=!1)),gn.addEventListener("mouseUp",(()=>i.enabled=!0)),gn.addEventListener("change",(t=>{if(!t.target||!t.target.object||1!==t.target.object.children.length)return;const n=t.target.object.scale,e=t.target.object.children[0];if("sphere"===e.shapeType)n.setScalar((n.x+n.y+n.z)/3);else if("cylinder"===e.shapeType){const t=(n.x+n.z)/2;n.x=t,n.z=t}})),engine.core.listenClick((t=>{if(!Nn)return;const n=t.find((t=>t.object.isEditorShape&&t.object.parent.visible));n&&Lt.selectShape(n.object)})),engine.core.callInLoop((()=>{const t=Date.now();Dt.bodies.forEach((n=>{n.transformFunction&&n.transformFunction.call(n.threeObj,t)}))})),Q.log("editor initialized. shift+click to select a shape. press S to switch transform mode. press shift+D to duplicate a shape.")}catch(t){Q.error(t),console.log(t)}};const In=yn,Vn=i({id:"map-test-page",classes:"game-container"});Vn.start=function(){engine.core.init(Vn),engine.files.loadLocalMapFile((t=>{const n=engine.physics.World(t,!0,!0);engine.cameraControls.orbitWorldPlayer(n),engine.characterControls.controlVelocity(n),engine.on("item-collected",(t=>{switch(t.detail.collectible){case"chain-extension-5":n.addChainLength(5);break;case"chain-extension-30":n.addChainLength(30);break;case"chain-extension-35":n.addChainLength(35)}})),engine.on("switch-change",(t=>{const n=t.detail;console.log("switch state changed : ",n)}))}))};const zn=Vn,Pn=e.p+"b22df3f990218490440eb16231b5bcdc.jpg",An=e.p+"621d528295afbca663a51f007e928ac0.jpg",Dn=e.p+"f0f670a59ca9320e8d16f9aa910d837f.svg",Fn=i({id:"homepage"});Fn.style.backgroundImage=`url(${Pn})`;const Bn=i({id:"homepage-background"});let Gn;Bn.style.backgroundImage=`url(${An})`;let $n,Un,qn=0,_n=60;function Jn(t){const n=t.x/window.innerWidth*-1+.5;$n=8*n,Un=12*(-1*n+5)}window.addEventListener("mousemove",Jn),function t(){if(!Gn){if($n){const t=qn+.1*($n-qn);Bn.style.transform=`translateX( calc( -50% + ${t}% ) )`,qn=t}if(Un){const t=_n+.1*(Un-_n);Fn.style.backgroundPosition=t+"%",_n=t}requestAnimationFrame(t)}}();const Wn=i({id:"title-image",tagName:"IMG"});Wn.src=Dn;const Xn=c();Xn.id="homepage-picking-box",Xn.classList.add("hidden");const Yn=setInterval((function(){window.engine&&(clearInterval(Yn),Xn.enable())}),50);function Kn(t,n,e){const r=d(t);if(e){const t=a(e);t.style.fontSize="1.5em",r.prepend(" "),r.prepend(t)}return r.onclick=()=>{document.body.append(n),n.start(),r.blur(),Xn.disable(),window.removeEventListener("mousemove",Jn),Gn=!0},r}Xn.append(Kn("PLAY GAME",J,"fas fa-play-circle"),Kn("EDIT map",In,"fas fa-edit"),Kn("TEST map",zn,"fas fa-gamepad")),Fn.append(Bn,Wn,Xn),Xn.setInitState=function(){Xn.classList.remove("hidden")},window.addEventListener("engine-loaded",(()=>{Xn.setInitState()}));const Qn=Fn;document.body.append(Qn)})()})();